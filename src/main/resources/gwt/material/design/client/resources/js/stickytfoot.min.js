!function(e,t,i){"use strict";var o="stickyTableFooter",l=0,n={fixedOffset:0,leftOffset:0,marginTop:0,scrollableArea:t};function r(i,r){var s=this;s.$el=e(i),s.el=i,s.id=l++,s.name=s.name+s.id,s.$window=e(t),s.$document=e(document),s.$el.bind("destroyed",e.proxy(s.teardown,s)),s.$clonedHeader=null,s.$originalHeader=null,s.isSticky=!1,s.hasBeenSticky=!1,s.leftOffset=null,s.topOffset=null,s.scrollBarWidth=13,s.init=function(){s.$el.each(function(){var t=e(this);t.css("padding",0),s.$originalHeader=e("tfoot:first",this),s.$clonedHeader=s.$originalHeader.clone(),t.trigger("clonedHeader."+o,[s.$clonedHeader]),s.$clonedHeader.addClass("tableFloatingHeader"),s.$clonedHeader.css("display","none"),s.$originalHeader.addClass("tableFloatingHeaderOriginal"),s.$originalHeader.after(s.$clonedHeader),s.$clonedHeader.find(".stickyExclude").remove(),s.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(s.$printStyle)}),s.setOptions(r),s.updateWidth(),s.bind()},s.destroy=function(){s.$el.unbind("destroyed",s.teardown),s.teardown()},s.teardown=function(){s.isSticky&&s.$originalHeader.css("position","static"),e.removeData(s.el,"plugin_"+o),s.unbind(),s.$clonedHeader.remove(),s.$originalHeader.removeClass("tableFloatingHeaderOriginal"),s.$originalHeader.css("visibility","visible"),s.$printStyle.remove(),s.el=null,s.$el=null},s.bind=function(){s.$scrollableArea.on("scroll."+o,s.toggleHeaders),s.$scrollableArea.find(".inner-scroll").on("scroll."+o,s.toggleHeaders),s.isWindowScrolling||(s.$window.on("scroll."+o+s.id,s.setPositionValues),s.$window.on("resize."+o+s.id,s.toggleHeaders)),s.$scrollableArea.on("resize."+o,s.toggleHeaders),s.$scrollableArea.on("resize."+o,s.updateWidth),s.$window.on("resize."+o,s.updateWidth),s.detectOuterScrolls()},s.unbind=function(){s.$scrollableArea.off("."+o,s.toggleHeaders),s.isWindowScrolling||(s.$window.off("."+o+s.id,s.setPositionValues),s.$window.off("."+o+s.id,s.toggleHeaders)),s.$scrollableArea.off("."+o,s.updateWidth),s.$window.off("."+o+s.id,s.updateWidth),s.$scrollableArea.parents().each(function(t,i){e(this).off("."+o)})},s.detectOuterScrolls=function(){s.$scrollableArea.parents().each(function(t,i){var l=e(this);l.off("."+o),l.hasScrollBar()&&l.on("scroll."+o,s.toggleHeaders)})},s.toggleHeadersAutoLoad=function(){s.toggleHeaders(!0)},s.toggleHeaders=function(t){s.$el&&s.$el.each(function(){var i,o=e(this),l=s.isWindowScrolling?isNaN(s.options.fixedOffset)?s.options.fixedOffset.outerHeight():s.options.fixedOffset:s.$scrollableArea.offset().top+(isNaN(s.options.fixedOffset)?0:s.options.fixedOffset),n=s.$scrollableArea.find(".inner-scroll"),r=o.offset(),a=n.scrollTop()+l,d=(n.scrollLeft(),s.isWindowScrolling?a>r.top:l>r.top);s.isWindowScrolling,r.top,o.height(),s.$clonedHeader.height(),s.isWindowScrolling;d||t?(i=r.left+s.options.leftOffset,s.$originalHeader.css({position:"fixed","margin-top":s.options.marginTop,left:i,"z-index":3}),s.leftOffset=i,s.topOffset=l,s.$clonedHeader.css("display",""),s.isSticky||(s.isSticky=!0,s.updateWidth(),s.$el.trigger("sticky-change",[!0])),s.setPositionValues()):s.isSticky&&(s.isSticky=!1)})},s.setPositionValues=function(){var t=s.$window.scrollTop(),i=s.$window.scrollLeft();if(!(!s.isSticky||i<0||i+s.$window.width()>s.$document.width())){s.detectOuterScrolls(),s.scrollBarWidth=e.scrollBarWidth(s.el);var o=s.$scrollableArea.find(".inner-scroll").scrollLeft(),l=o+s.getOuterScrollLeft(),n=Math.max(s.getOuterScrollTop()-s.$scrollableArea.position().top-s.options.marginTop,0),r=s.$originalHeader.outerHeight();s.$originalHeader.css({top:s.topOffset-(s.isWindowScrolling?0:t),left:s.leftOffset-(s.isWindowScrolling?0:i),clip:"rect("+n+"px, "+(s.$scrollableArea.outerWidth()+o-s.scrollBarWidth)+"px, "+(r+50)+"px, "+l+"px)"})}},s.updateWidth=function(){if(s.isSticky){s.$originalHeaderCells||(s.$originalHeaderCells=e('tr:not(".stickyExclude") th,td',s.$originalHeader)),s.$clonedHeaderCells||(s.$clonedHeaderCells=e('tr:not(".stickyExclude") th,td',s.$clonedHeader));var t=s.getWidths(s.$clonedHeaderCells);s.setWidths(t,s.$clonedHeaderCells,s.$originalHeaderCells),s.$originalHeader.css("width",s.$clonedHeader.width())}},s.getWidths=function(i){var o=[];return i.each(function(i){var l,n=e(this);if("border-box"===n.css("box-sizing"))l=n[0].getBoundingClientRect().width;else if("collapse"===e("th",s.$originalHeader).css("border-collapse"))if(t.getComputedStyle)l=parseFloat(t.getComputedStyle(this,null).width);else{var r=parseFloat(n.css("padding-left")),a=parseFloat(n.css("padding-right")),d=parseFloat(n.css("border-width"));l=n.outerWidth()-r-a-d}else l=n.width();o[i]=l}),o},s.setWidths=function(e,t,i){t.each(function(t){var o=e[t];i.eq(t).css({"min-width":o,"max-width":o})})},s.resetWidths=function(t,i){t.each(function(t){var o=e(this);i.eq(t).css({"min-width":o.css("min-width"),"max-width":o.css("max-width")})})},s.getOuterScrollTop=function(){var t=0;return s.$scrollableArea.parents(":not(body,html)").each(function(i,o){t+=e(this).scrollTop()}),t},s.getOuterScrollLeft=function(){var t=0;return s.$scrollableArea.parents(":not(body)").each(function(){t+=e(this).scrollLeft()}),t},s.setOptions=function(i){s.options=e.extend({},n,i),s.$scrollableArea=e(s.options.scrollableArea),s.isWindowScrolling=s.$scrollableArea[0]===t},s.updateOptions=function(e){s.setOptions(e),s.unbind(),s.bind(),s.updateWidth(),s.toggleHeaders()},s.init()}e.fn[o]=function(t){return this.each(function(){var i=e.data(this,"plugin_"+o);i?"string"==typeof t?i[t].apply(i):i.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+o,new r(this,t))})}}(jQuery,window);